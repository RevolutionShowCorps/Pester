# Pester
Automated toolset to manage attendance and registers at Juniors rehearsals.

## 1. `register-fix.js`
This script checks if there is a meeting scheduled on `OSM` for the following day. If there is, it sets attendance to `X` for members that we know shouldn't be attending. It makes use of the `Is Junior?` and `Is Senior?` flags to set Juniors as not attending Senior rehearsals and vice versa.

Current cron configuration:
```
0 0 * * 3 /usr/bin/node /path/to/Pester/register-fix.js
```

## 2. `attendance.js` [WIP]
This script checks if there is a meeting scheduled on `OSM` for the following day. If there is, it checks the register and generates a report of who should be there and who has let us know they are not coming. The final stage left for this script is to get it emailing the report to all instructors.

Current cron configuration:
```
0 17 * * * /usr/bin/node /path/to/Pester/attendance.js
```

## 3. `pester.js`
This app checks if there is a meeting scheduled on `OSM` for that day. If there is, it schedules a task 15 minutes after the start time of said meeting. This task checks the register and sends a text message to the parents of any member marked up with a `?` for that meeting.

Current cron configuration:
```
0 0 * * * /usr/bin/node /path/to/Pester/pester.js
```

## 4. `server` [WIP]
This is used to deal with parent responses to messages sent by `pester.js`. Currently, if a parent replies to the automated text then it just gets forwarded on.
It would also be nice if this server could be used to display the report generated by `attendance.js`. It would be even nicer to allow parent texts to be used to report absences - e.g. texting '2022-05-05' would get the server to determine which member (or parent) texted, then mark them as not attending for the rehearsal on the 5th May 2022.